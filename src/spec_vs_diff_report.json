{
  "kind": "spec_vs_diff_report",
  "version": "1.0",
  "generatedAt": "2026-02-18T04:55:51.454Z",
  "summary": "Reports module was added end-to-end in the frontend (routes, pages, dashboard card, navigation, basic PDF print download) and backend gained a new Report type and at least a createReport function with per-caller storage. However, key backend requirements (UUID Text IDs and report-generation APIs for multiple report types) are not evidenced, and report generation appears to be implemented client-side for only two report types.",
  "missing_requirements": [
    {
      "id": "REQ-1",
      "requirement": "Report entity IDs must be unique UUID-like strings (Text) and stable across queries.",
      "reason": "Backend Report.id is implemented as Nat (and frontend treats it as bigint), not a UUID-like Text string.",
      "evidence": [
        "backend/main.mo",
        "frontend/src/pages/ReportsPage.tsx",
        "frontend/src/pages/ReportDetailPage.tsx"
      ]
    },
    {
      "id": "REQ-2",
      "requirement": "Backend report-generation API supporting the specified report types (Profit & Loss, Cash Flow, Invoice Summary, Budget vs Actual, Category Breakdown, Payment Summary) with date range + optional filters, returning structured totals/breakdowns.",
      "reason": "Diff evidence shows report results computed in the frontend from transactions/categories for only two types, and no backend report-generation/query API is shown.",
      "evidence": [
        "frontend/src/components/reports/ReportResultsView.tsx",
        "backend/main.mo"
      ]
    },
    {
      "id": "REQ-5",
      "requirement": "Live report preview must be based on current form values and respect optional filters (category, account, tag).",
      "reason": "The preview component fetches transactions by date range and categories, but the provided `filters` prop is not used in the shown computation, so category/account/tag filtering is not evidenced.",
      "evidence": [
        "frontend/src/components/reports/ReportResultsView.tsx",
        "frontend/src/pages/ReportFormPage.tsx"
      ]
    },
    {
      "id": "REQ-7",
      "requirement": "React Query hooks must include generating report preview/results wired to backend actor APIs (in addition to list/get/create/update/delete).",
      "reason": "Diff summary only evidences hooks for report CRUD; preview/results generation hooks are not shown, and preview is computed client-side.",
      "evidence": [
        "frontend/src/hooks/useFinanceQueries.ts",
        "frontend/src/components/reports/ReportResultsView.tsx"
      ]
    }
  ],
  "hallucinated_features": [
    {
      "description": "Client-side report generation using transactions/categories queries instead of a backend report-generation API.",
      "reason": "REQ-2 specifies backend-generated report results; the diff implements calculations in React (`ReportResultsView`) and uses `useGetTransactionsByDateRange`/`useGetCategories` rather than a backend report-generation endpoint.",
      "evidence": [
        "frontend/src/components/reports/ReportResultsView.tsx"
      ]
    },
    {
      "description": "Report IDs implemented as incremental Nat/bigint instead of UUID Text.",
      "reason": "Not requested; conflicts with REQ-1 requirement for UUID-like Text IDs.",
      "evidence": [
        "backend/main.mo",
        "frontend/src/pages/ReportsPage.tsx",
        "frontend/src/pages/ReportDetailPage.tsx"
      ]
    },
    {
      "description": "Unrelated feature changes to Budgets page logic (carryover/spending calculations and mutation usage).",
      "reason": "Not part of the Reports module request; appears as additional refactor/behavior change.",
      "evidence": [
        "frontend/src/pages/BudgetsPage.tsx"
      ]
    },
    {
      "description": "Unrelated changes to Invoice pages (download toast text/handling and permissions gating behavior).",
      "reason": "Not requested in the Reports module work; these are extra modifications outside scope.",
      "evidence": [
        "frontend/src/pages/InvoiceDetailPage.tsx",
        "frontend/src/pages/InvoiceFormPage.tsx"
      ]
    },
    {
      "description": "Unrelated changes to Transactions page (bulk edit stubs/CSV import/export wiring and selection UI behaviors).",
      "reason": "Not requested as part of adding Reports.",
      "evidence": [
        "frontend/src/pages/TransactionsPage.tsx"
      ]
    }
  ],
  "confidence": 0.68,
  "changed_files": [
    "backend/main.mo",
    "frontend-file-summaries.txt",
    "frontend/src/App.tsx",
    "frontend/src/components/dashboard/ReportsCard.tsx",
    "frontend/src/components/layout/AppShell.tsx",
    "frontend/src/components/reports/ReportResultsView.tsx",
    "frontend/src/hooks/useFinanceQueries.ts",
    "frontend/src/pages/BudgetsPage.tsx",
    "frontend/src/pages/DashboardPage.tsx",
    "frontend/src/pages/InvoiceDetailPage.tsx",
    "frontend/src/pages/InvoiceFormPage.tsx",
    "frontend/src/pages/ReportDetailPage.tsx",
    "frontend/src/pages/ReportFormPage.tsx",
    "frontend/src/pages/ReportsPage.tsx",
    "frontend/src/pages/TransactionsPage.tsx",
    "frontend/src/utils/reportPdf.ts",
    "project_state.json"
  ]
}