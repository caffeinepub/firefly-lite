{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "Accounting software for business and home use (no field service logic), expanding financial features with Payments and Reports modules.",
  "architectural_notes": [
    "No field service logic; app is for accounting in business and home settings.",
    "Role-based access: Admin (full) and Viewer (read-only)."
  ],
  "known_issues": [
    "Prior attempt to implement the Payments module failed due to prompt complexity; may require breaking the build into smaller steps."
  ],
  "isFixRequest": false,
  "existing_features": [
    {
      "id": "feature-add-reports-routes-to-the-tanstack-router-and-create-three-pages-reports-list-page-reports-report-create-page-reports-new-and-report-detail-page-reports-reportid-plus-an-edit-route-reports-reportid-edit-reusing-the-create-form-for-editing",
      "title": "Add Reports routes to the TanStack Router and create three pages: Reports list page (/reports), report create page (/reports/new) and report detail page (/reports/$reportId), plus an edit route (/reports/$reportId/edit) reusing the create form for editing.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-the-reports-list-page-ui-with-a-table-showing-report-name-type-date-range-created-date-include-filters-for-report-type-and-date-range-and-row-actions-for-view-download-delete-plus-a-top-level-create-new-report-action",
      "title": "Implement the Reports List Page UI with a table showing: report name, type, date range, created date; include filters for report type and date range; and row/actions for View, Download, Delete plus a top-level “Create New Report” action.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-the-report-create-edit-page-ui-with-a-form-containing-reporttype-enum-startdate-enddate-and-optional-filters-category-account-tag-and-auto-generate-a-live-report-preview-based-on-the-current-form-values-provide-buttons-save-and-download-pdf",
      "title": "Implement the Report Create/Edit Page UI with a form containing reportType (enum), startDate, endDate, and optional filters (category, account, tag), and auto-generate a live report preview based on the current form values. Provide buttons: Save and Download PDF.",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-the-report-detail-page-ui-with-a-summary-section-and-a-dynamic-body-charts-or-tables-depending-on-report-type-showing-totals-and-breakdowns-include-actions-edit-delete-download",
      "title": "Implement the Report Detail Page UI with a summary section and a dynamic body (charts or tables depending on report type) showing totals and breakdowns. Include actions: Edit, Delete, Download.",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-add-react-query-hooks-for-reports-in-frontend-src-hooks-usefinancequeries-ts-for-listing-reports-fetching-a-report-creating-updating-deleting-reports-and-generating-report-preview-results-wired-to-the-backend-actor-apis",
      "title": "Add React Query hooks for Reports in frontend/src/hooks/useFinanceQueries.ts for listing reports, fetching a report, creating/updating/deleting reports, and generating report preview/results, wired to the backend actor APIs.",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-reports-dashboard-card-to-the-existing-dashboard-page-showing-last-report-type-run-most-used-report-type-and-a-run-new-report-button-that-navigates-to-the-report-create-page",
      "title": "Add a “Reports” dashboard card to the existing Dashboard page showing: last report type run, most used report type, and a “Run New Report” button that navigates to the report create page.",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-add-reports-to-the-main-navigation-under-the-financial-section-conceptually-alongside-other-finance-items-with-a-bar-chart-icon-linking-to-reports",
      "title": "Add “Reports” to the main navigation under the Financial section conceptually (alongside other finance items) with a Bar Chart icon, linking to /reports.",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Create a Payments module (list/create-edit/detail pages, Payment entity, admin/viewer permissions, dashboard card, sidebar navigation)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Create a Reports module (list/create/detail pages, report types incl. P&L/cash flow/invoice & payment summaries/etc., Report entity, dashboard card, sidebar navigation)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Implement backend persistence and CRUD APIs for a per-user Report entity, including: id (UUID string), reportType (enum), startDate/endDate (DateTime as Int milliseconds), filters (optional JSON stored as Text), createdAt/updatedAt (Int milliseconds), and a derived report name suitable for display in the Reports list.",
      "reqIds": [
        "REQ-1"
      ],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Implement backend query functions to generate report results for the supported report types using existing financial data (transactions/categories, invoices, budgets when available). Report generation must support date range and optional filters (category, account, tag) and return structured data suitable for charts/tables in the UI.",
      "reqIds": [
        "REQ-2"
      ],
      "status": "pending"
    }
  ],
  "projectName": "Firefly Lite",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}